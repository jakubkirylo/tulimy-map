<div class="container mx-auto p-4">
  <h2 class="text-xl font-bold mb-4">POI Management</h2>

  <!-- Create POI Form -->
  <form
    (ngSubmit)="createPoi()"
    class="mb-6 grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-white rounded shadow"
  >
    <p-floatlabel variant="on">
      <input
        pInputText
        [(ngModel)]="newPoi.name"
        name="name"
        id="name"
        required
      />
      <label for="name">Name</label>
    </p-floatlabel>
    <p-floatlabel variant="on">
      <input
        pInputText
        [(ngModel)]="newPoi.coordinates"
        name="coordinates"
        id="coordinates"
        placeholder="lat,lng"
        required
      />
      <label for="coordinates">Coordinates</label>
    </p-floatlabel>
    <!-- <p-floatlabel variant="on">
      <p-dropdown
        [options]="poiTypes"
        [(ngModel)]="newPoi.type"
        name="type"
        id="type"
        [showClear]="true"
        optionLabel="label"
        optionValue="value"
        required
      ></p-dropdown>
      <label for="type">Type</label>
    </p-floatlabel> -->
    <p-floatlabel variant="on">
      <p-dropdown
        [options]="pois2"
        [(ngModel)]="poiForm"
        inputId="float-label"
        [showClear]="true"
        required
        [ngModelOptions]="{ standalone: true }"
      ></p-dropdown>
      <label for="float-label">Type</label>
    </p-floatlabel>
    <div class="card flex justify-content-center">
      <p-floatLabel>
        <p-dropdown
          [options]="cities"
          [(ngModel)]="selectedCity"
          optionLabel="name"
          inputId="float-label"
        />
        <label for="float-label">Select a City</label>
      </p-floatLabel>
    </div>
    <p-floatlabel variant="on">
      <input
        pInputText
        [(ngModel)]="newPoi.description"
        name="description"
        id="description"
      />
      <label for="description">Description</label>
    </p-floatlabel>
    <p-floatlabel variant="on">
      <input
        pInputText
        [(ngModel)]="newPoi.banners"
        name="banners"
        id="banners"
        placeholder="comma separated"
      />
      <label for="banners">Banners</label>
    </p-floatlabel>
    <p-floatlabel variant="on">
      <input pInputText [(ngModel)]="newPoi.www" name="www" id="www" />
      <label for="www">Website</label>
    </p-floatlabel>
    <p-floatlabel variant="on">
      <input pInputText [(ngModel)]="newPoi.phone" name="phone" id="phone" />
      <label for="phone">Phone</label>
    </p-floatlabel>
    <p-floatlabel variant="on">
      <input
        pInputText
        [(ngModel)]="newPoi.address"
        name="address"
        id="address"
      />
      <label for="address">Address</label>
    </p-floatlabel>
    <div class="md:col-span-2 flex justify-end">
      <button
        pButton
        type="submit"
        label="Add POI"
        class="w-full md:w-auto"
      ></button>
    </div>
  </form>

  <!-- POI List -->
  <table class="min-w-full border">
    <thead>
      <tr>
        <th>Name</th>
        <th>Coordinates</th>
        <th>Type</th>
        <th>Description</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let poi of pois()">
        <ng-container *ngIf="editingPoi()?.id !== poi.id; else editRow">
          <td>{{ poi.name }}</td>
          <td>{{ poi.coordinates }}</td>
          <td>{{ poi.type }}</td>
          <td>{{ poi.description }}</td>
          <td>
            <button (click)="startEdit(poi)" class="text-blue-600">Edit</button>
            <button (click)="deletePoi(poi.id)" class="text-red-600 ml-2">
              Delete
            </button>
          </td>
        </ng-container>
      </tr>
      <ng-template #editRow>
        <tr *ngIf="editingPoi() as editPoi">
          <td><input [(ngModel)]="editPoi.name" class="border p-1" /></td>
          <td>
            <input [(ngModel)]="editPoi.coordinates" class="border p-1" />
          </td>
          <td><input [(ngModel)]="editPoi.type" class="border p-1" /></td>
          <td>
            <input [(ngModel)]="editPoi.description" class="border p-1" />
          </td>
          <td>
            <button (click)="saveEdit()" class="text-green-600">Save</button>
            <button (click)="cancelEdit()" class="text-gray-600 ml-2">
              Cancel
            </button>
          </td>
        </tr>
      </ng-template>
    </tbody>
  </table>
</div>
